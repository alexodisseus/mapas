{% extends "base.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="content-area">
    <h3>Editar Mapa da Ilha: {{ data[0].ilhacoluna.nome if data else '---' }}</h3>

    <table class="grid-map">
        <tbody>
            {% for linha in range(10) %}
                <tr>
                    {% for coluna in range(20) %}
                        {% set celula = data 
                            | selectattr('linha', 'equalto', linha|string)
                            | selectattr('coluna', 'equalto', coluna|string)
                            | list 
                            | first 
                        %}
                        <td style="background-color: {{ celula.cor if celula else '#f5f5f5' }};">
                            {% if celula %}
                                <div>
                                    <strong>{{ celula.nome }}</strong><br>
                                    {% if celula.banca %}
                                        {{ celula.banca.nome }}
                                    {% endif %}
                                </div>
                            {% else %}
                                {{ coluna }}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <br>
    <h3>Bancas da Ilha</h3>

    <table class="grid-bancas">
        <thead>
            <tr>
                <th colspan="3">Permission√°rio</th>
                <th>banca</th>
                <th>Tipo</th>
                <th>Alocado</th>
            </tr>
        </thead>
        <tbody>
            {% for banca in bancas %}
            <tr>
                <td colspan="3" class="perm">{{ banca.permissionario }}</td>
                <td>{{ banca.nome }}</td>
                <td>{{ banca.tipo }}</td>
                <td>{{ banca.id }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    </div>
{% endblock %}
